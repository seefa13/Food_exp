{{ block content }}

    <div class = "game-body" id = "game-body">

        <div class = text id = compare> Please compare the following two products: </div>

        <div class = "game-table">
            <div class = "row">
                <button type="button" class="name-btn" id="I1"> </button>
                <button type="button" class="name-btn" id="I1"> Product 1 </button> 
                <button type="button" class="name-btn" id="I2"> Product 2 </button> 
            </div>
            <div class = "row">
                <button type="button" class="attr-btn" id="R1"> Price </button> 
                <button type="button" class="game-btn" id="R1I1"> 
                    <div class="btn-content"> € {{cp1}} </div>
                    <div class="btn-hidden" type="hidden"> </div>
                </button>
                <button type="button" class="game-btn" id="R1I2"> 
                    <div class="btn-content"> € {{cp1}} </div>
                    <div class="btn-hidden" type="hidden"> </div>
                </button>
            </div>
            <div class = "row">
                <button type="button" class="attr-btn" id="R2"> Taste </button> 
                <button type="button" class="game-btn" id="R2I1"> 
                    <div class="btn-content"> <img class="img-rating" src="{% static ct1 %}" width="150px" height="35px" /> </div>
                    <div class="btn-hidden" type="hidden"> </div>
                </button> 
                <button type="button" class="game-btn" id="R2I2"> 
                    <div class="btn-content"> <img class="img-rating" src="{% static ct2 %}" width="150px" height="35px" /> </div>
                    <div class="btn-hidden" type="hidden">  </div>
                </button>     
            </div>
            <div class = "row"> 
                <button type="button" class="attr-btn" id="R2"> 
                    {{ if Treatment == 0 }} Health 
                    {{ else }} Risk
                    {{ endif }} 
                </button> 
                <button type="button" class="game-btn" id="R3I1"> 
                    <div class="btn-content"> <img class="img-rating" src="{% static ch1 %}" width="150px" height="35px" /> </div>
                    <div class="btn-hidden" type="hidden">  </div>
                </button> 
                <button type="button" class="game-btn" id="R3I2"> 
                    <div class="btn-content"> <img class="img-rating" src="{% static ch2 %}" width="150px" height="35px" /> </div>
                    <div class="btn-hidden" type="hidden">  </div>
                </button>
            </div>
        </div>

        <div class = text id = choose> Please choose one of the two products: </div>

        <div>
            <button type="button" name="iHDec" onclick="decision(0)"> Product 1 </button>
            <button type="button" name="iHDec" onclick="decision(1)"> Product 2 </button>
        </div>

        <input type = 'hidden' name = 'dRT' id="dRT">
        <input type = 'hidden' name = 'iHDec' id="iHDec">
        <button id = "nextbut" style="display: none"> </button>
    </div>

{{ endblock }}

{{ block scripts }}

<script>

var tStart,tNow

window.addEventListener('DOMContentLoaded', (event) => {
    tStart = new Date();
    console.log('Starts now: $(tStart)');
});

function decision(value) {
    tNow = new Date();
    console.log('Ends now: $(tNow)');
    let dRT = tNow - tStart;
    let nextbut = document.getElementById('nextbut');
    let inputDec = document.getElementById('iHDec');
    let inputdRT = document.getElementById('dRT');

    inputDec.value = value;
    inputdRT.value = dRT;
    nextbut.click();
}

function adjustText(elem) {
            let ratioWidth = elem.clientWidth/elem.scrollWidth;
            let ratioHeight = elem.clientHeight/elem.scrollHeight;
            // Set initial scale as 100%
            if (ratioWidth<1 || ratioHeight<1) {
                let ratio = Math.floor(100*Math.min(ratioWidth,ratioHeight))-1
                elem.style.fontSize = `${ratio}%`;
                console.log(`Resized ${elem.id} to ${ratio}%`);
            };                                  
        };

function resizeButtons() {
            lButtons = document.getElementsByClassName('game-btn');
            for (let i=0; i<lButtons.length; i++) {
                adjustText(lButtons[i]);
            };
        };

resizeButtons()
</script>

{{ endblock }}

{{ block styles }}
<style>
    .debug-info{
        top: 120vh
    }
    .game-body{
        width: 100vw;
        height: 100vh;
        background-color: lightgray;
        position: absolute;
        transform: translate(-50%,-50%);
        top: 50vh;
        left: 50vw;
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        flex-direction: column;
    }
    .game-table{
        background-color: darkgray;
        display: flex;
        flex-direction: column;
        height: 400px;
    }
    .row{
        width: 625px;
        display: flex;
        flex-direction: row;
        justify-content: center;
    }
    .cell{
        width: 200px;
        height: 100px;
        border: 1px solid black;
        background-color: darkgray;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .text{
        color: black;
    }
    .name-btn{
        width: 200px;
        height: 100px;
        border: 1px solid black;
        background-color: darkgray;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .attr-btn{
        width: 200px;
        height: 100px;
        border: 1px solid black;
        background-color: darkgray;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .game-btn{
        width: 200px;
        height: 100px;
        border: 1px solid black;
        background-color: darkgray;
        display: flex;
        justify-content: center;
        align-items: center;
    }
</style>
{{ endblock }}
